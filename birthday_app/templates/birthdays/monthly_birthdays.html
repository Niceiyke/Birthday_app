<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Birthdays</title>

    <style>
        /* Basic styling */
        body {
            background-image: url("");
            background-color: rgba(0, 0, 0, 0.5);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            margin: 0;
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            position: relative;
        }

        /* Dark overlay for background contrast */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        /* Slideshow container styling */
        .slideshow-container {
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 2;
            text-align: center;
        }

        /* Hide all workers initially */
        .worker {
            display: none;
            transition: opacity 0.5s ease-in-out;
        }

        .worker.active {
            display: block;
            opacity: 1;
        }

        /* Image styling */
        .worker img, .sideImg {
            width: 500px;
            height: 500px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .sideImg {
            border-radius: 0;
            width: 500px;
            height: 500px;
        }

        /* Text styling */
        h2 {
            margin: 0;
            font-size: 3.5em;
        }

        p {
            margin: 0;
            font-size: 1.5em;
        }

        /* Play button styling */
        #playButton {
            position: absolute;
            bottom: 20px;
            z-index: 2;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 5px;
        }

        /* Responsive styling */
        @media (max-width: 768px) {
            .worker img, .sideImg {
                width: 250px;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>

    <div class="slideshow-container">
        <img src="{{ background_image.url }}" alt="" class="sideImg">
        {% for worker in workers %}
            <div class="worker" id="worker-{{ forloop.counter }}">
                <img src="{{ worker.picture.url }}" alt="{{ worker.first_name }}'s picture">
                <div>
                    <p>Happy Birthday</p>
                    <h2>{{ worker.first_name }} {{ worker.last_name }}</h2>
                    <p>Wishing you a great year ahead.</p>
                </div>
                <h2>{{ worker.birthday|date:"F j" }}</h2>
            </div>
        {% endfor %}
    </div>

    <!-- Audio player for background music -->
    <audio id="backgroundMusic" loop>
        {% if default_music %}
            <source src="{{ default_music.file.url }}" type="audio/mpeg">
        {% endif %}
        {% for worker in workers %}
            {% if worker.background_music %}
                <source src="{{ worker.background_music.url }}" type="audio/mpeg">
            {% endif %}
        {% endfor %}
        Your browser does not support the audio element.
    </audio>

    <button id="playButton">Play Background Music</button>

    <script>
        let currentIndex = 0;
        const workers = document.querySelectorAll('.worker');
        const totalWorkers = workers.length;

        // Show the current worker
        function showWorker(index) {
            workers.forEach((worker, i) => {
                worker.classList.toggle('active', i === index);
            });
        }

        // Initial display
        showWorker(currentIndex);

        // Auto change worker every 10 seconds
        setInterval(() => {
            currentIndex = (currentIndex + 1) % totalWorkers;
            showWorker(currentIndex);
        }, 30000);

        // Play background music
        document.addEventListener("DOMContentLoaded", function() {
            const backgroundMusic = document.getElementById('backgroundMusic');
            const playButton = document.getElementById('playButton');

            // Attempt to autoplay music
            backgroundMusic.play().then(() => {
                playButton.style.display = "none";
            }).catch(error => {
                playButton.style.display = "block";
            });

            // Play music on button click
            playButton.addEventListener("click", function() {
                backgroundMusic.play();
                playButton.style.display = "none";
            });
        });
    </script>
</body>
</html>
